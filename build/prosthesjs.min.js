!function(a){a.ui={},a.view={}}(this),function(a){var b=a;b.domLib=function(){return b.$||b.jQuery||b.zepto},b.EMPTY_FN=function(){},b.JST_NONE=b.EMPTY_FN;var c=b.domLib();b.$define=function(a){return a.call(b,b,c)}}(this),function(a){a.DISABLE_GLOBAL_ALIASES||(a.Model=Backbone.Model,a.Collection=Backbone.Collection,a.View=Backbone.View,a.ItemView=Backbone.Marionette.ItemView,a.CollectionView=Backbone.Marionette.CollectionView,a.CompositeView=Backbone.Marionette.CompositeView,a.Router=Backbone.Router,a.AppRouter=Backbone.Marionette.AppRouter,a.Application=Backbone.Marionette.Application)}(this),$define(function(a){var b=function(a,c){var d=a.split("."),e=d.shift(),f=c[e]=c[e]||{},g=f;return d.length&&(g=b(d.join("."),f)),g};a.$defineClass=function(c,d){var e=_.str.strLeftBack(c,"."),f=_.str.strRightBack(c,"."),g=d.call(a,a,a.domLib());if(!g)throw new Error('Could not define class "'+c+'". You must return a valid object.');var h=b(e,a);return h[f]=g,g},a.$defineView=function(b,c){var d=$('[data-view="'+b+'"]').first(),e=null;if(d&&d.length&&(e=a.$defineClass(b,c),!e.prototype||!e.prototype.render))throw new Error('Class "'+b+'" does not appear to be a view (no "render" method).');return e}}),function(){function a(a,b){b=(b||"").toLowerCase();var c=this.prototype;_.isObject(a)&&_.each(a,function(a,d){if(_.isFunction(a)){var e=c[d]||function(){};if("before"===b)c[d]=function(){var b=a.apply(this,arguments);return b!==!1&&(b=e.apply(this,arguments)),b};else{if("after"!==b)throw new Error('You can only specify "before" or "after" for interceptors.');c[d]=function(){var b=e.apply(this,arguments);return b=a.apply(this,_.union(_.toArray(arguments),b))}}}})}var b=Backbone.View.extend,c=function(){var b=this.prototype;return _.each(_.toArray(arguments||[]),function(c){if(!_.isObject(c))throw new Error("Mixin must be an valid object!");var d=_.omit(c,"mix","before","after");_.defaults(b,d),c.mix&&_.isFunction(c.mix)&&c.mix.call(d,this),a.call(this,c.before,"before"),a.call(this,c.after,"after")},this),this},d=function(){var a=b.apply(this,arguments);return a.mixin=c,a},e=[View,ItemView,CollectionView,CompositeView,Model,Collection];_.each(e,function(a){a.extend=d})}(this),function(a){a.errors={mustOverride:function(a){var b=new Error(a+" must be overriden by user class.");return b.cause=errors.mustOverride,b}}}(this),function(a){a.PagedCollection=Collection.extend({parseData:"data",parse:function(a){var b=this.parseData?_.result(this.parseData,a):a;return this.pageData=this.parsePageData(a),b},parsePageData:function(a){return _.pick(a||{},"page","pages","total")}})}(this),function(a){a.view.ModelBinderMixin={before:{onBeforeClose:function(){this.modelBinder.unbind()}},after:{render:function(){this.modelBinder.bind(this.model,this.el)}}}}(this,domLib()),function(a,b){var c=a.NOTIFICATION_DEFAULT_CONTAINER=b("#global-notifications");a.view.NotificationMixin={notify:function(a,d){a=a||"",d=d||{};if(_.isString(a)){var e=a;a={html:e}}else if(!_.isObject(a)||!_.has(a,"text"))throw new Error('The "msg" argument is not a String or a valid Object with a "text" property.');var f=_.extend(d,{message:a}),g=this.getNotificationContainer?this.getNotificationContainer():c;g&&g.length||(g=c);var h=this.currentNotification=g.notify(_.extend(this.notificationDefaults||{},f));return h.$note.append(b('<i class="alert-icon"></i>')),f.autoShow!==!1&&h.show(),h},notifySuccess:function(a,b){return this.notify(a,_.extend(b||{},{type:"success"}))},notifyError:function(a,b){return this.notify(a,_.extend(b||{},{type:"danger"}))},notifyWarning:function(a,b){return this.notify(a,_.extend(b||{},{type:"warning"}))},notifyInfo:function(a,b){return this.notify(a,_.extend(b||{},{type:"info"}))}}}(window,domLib()),function(a,b){a.view.TooltipMixin={mix:function(){if(_.isUndefined(b.fn.tooltip))throw new Error("Bootstrap Tooltip plugin was not found!")},before:{onBeforeClose:function(){this.$('[data-toggle="tooltip"]').tooltip("destroy")}},after:{render:function(){this.$('[data-toggle="tooltip"]').tooltip()}}}}(this,domLib()),function(a){a.BaseView=ItemView.extend({template:a.JST_NONE});var b=View.prototype.initialize;View.prototype.initialize=function(){b.apply(this,arguments),this.options.autoRender&&this.render()}}(this),function(a){a.PagerView=BaseView.extend({events:{"click li:first-child a":"prev","click li:last-child a":"next"},ui:{prevButton:"li:first-child a",nextButton:"li:last-child a"},onRender:function(){this._configureMainEl(),this._renderControls()},_configureMainEl:function(){this.$el.addClass(this.options.style||"pagination");var a=this.options.scale;a&&a.length&&this.$el.addClass("pagination-"+a)},_renderControls:function(){var a="<ul>";a+="</ul>"}})}(this),function(a){a.TableRowView=ItemView.extend({tagName:"tr"}),a.TableView=CollectionView.extend({itemView:TableRowView,render:function(){this.$el.addClass("table"),this.$body=this.$("tbody").first();var a=this.columnDefinitions=this.columnDefinitions||[];this.columnCount=a.length,this.rowActions=this.rowActions,CollectionView.prototype.render.call(this,options)},buildItemView:function(a,b,c){b=b||TableRowView;var d=this.columnDefinitions,e=new b(_.extend({model:a,columnDefinitions:d},c||{}));if(!(e instanceof TableRowView))throw new Error("Your itemView must be a TableRowView");if(e.tableView=this,!e.template){var f=this.rowActions,g=this;e.template=function(a){var b="";return _.each(d,function(c){var d=a[c]||"";_.isFunction(c)&&(d=c.call(g,a)),b+="<td>",b+=d,b+="</td>"}),_.isObject(f)&&(b+='<td class="actions"><div class="btn-group">',_.each(f,function(a,c){var d=a.href?"a":"button";b+="<"+d+' class="btn '+c+'"',a.href&&(b+=' href="'+a.href+'"'),a.tooltip&&(b+=' data-toggle="tooltip" title="'+a.tooltip+'"'),b+=">",a.icon&&(b+='<i class="icon-'+a.icon+'"></i>'),b+=a.text||"",b+="</"+d+">"}),b+="</div></td>"),b}}return e},appendHtml:function(a,b){a.$body.append(b.$el);var c={};_.each(a.rowActions,function(a,d){c[d]=b.$("."+d)}),b.actionButtons=c}})}(this,domLib()),$define(function(a,b){function c(a){var b=_.str.strRightBack(a,".");return b.charAt(0).toLowerCase()+b.slice(1)}function d(a,b){var c=a.split("."),e=c.shift(),f=b[e];return f&&c.length&&(f=d(c.join("."),f)),f}function e(a){return new Error('Class "'+a+'" could not be found. Make sure it exists, is included and is not misspelled.')}function f(b){var c=function(b,c){var e=null;if(c)if(b.prototype[c])e=new b,e[c].call(e);else{var f=d(c,a);f&&(e=new b(f))}return e||new b},f={};return _.each(["model","collection"],function(g){var h=b.data(g);if(h){var i=d(h,a);if(!i)throw e(h);var j=b.data(g+"-init")||"";f[g]=c(i,j)}}),f}function g(a){var b={};return _.each(a.data(),function(a,c){if(c=_.str.underscored(c),_.str.startsWith(c,"view_")){var d=_.str.strRight(c,"_");d=_.str.classify(d),d=d.charAt(0).toLowerCase()+d.slice(1),"undefined"!=typeof _.str.toBoolean(a)?a=_.str.toBoolean(a):_.str.toNumber(a)&&(a=_.str.toNumber(a)),b[d]=a}}),b}function h(b,c){var h=d(b||"",a);if(!h)throw e(b);var i=new h(_.extend({el:c},g(c),f(c)));return i.nestedViews={},i}function i(a){return a.data("view-render")!==!1}b.fn.view=function(){return this.data("view")},b.fn.createView=function(){var a=b(this);return a.each(function(){var a=b(this),d=a.data("view"),e=h(d,a);e.on("close",function(){_.each(this.nestedViews,function(a){a.close()})}),a.data("view",e);var f=a.parents("[data-view]").first(),g=!!f.length;if(g){var j=f.data("view");e.parentView=j;var k=a.data("view-alias")||c(d);j.nestedViews[k]=e,i(a)&&(j._isRendered||j.on("render",_.bind(e.render,e)))}}),a.each(function(){var a=b(this),c=a.view(),d=c.parentView;d&&!d._isRendered||!i(a)||c.render()}),a},a.View.load=function(){b(function(){b("[data-view]").createView()})}}),function(a){a.ui.Widget=BaseView.extend({})}(this),function(a){a.ui.Autocomplete=CompositeView.extend({onRender:function(){},_setupTypeahead:function(){this.$el.typeahead({source:this._syncCollection})},_syncCollection:function(){}})}(this),function(a){a.ui.Button=ui.Widget.extend({})}(this,domLib()),function(a){var b=ItemView.extend({tagName:"li",template:function(a){return $("<a/>").attr("tabindex","-1").attr("href","#").data("item-cid",a.cid).data("item-id",a.id).text(a.itemText)},templateHelpers:function(){return{cid:this.cid,itemText:this.model.get(this.options.textAttribute)}}});b.Model=Model.extend({}),a.ui.DropdownSelect=CompositeView.extend({ui:{toggle:".dropdown-toggle",menu:"ul.dropdown-menu"},template:JST_NONE,itemViewContainer:"ul.dropdown-menu",itemView:b,initialize:function(a){this.itemTextAttribute=a.itemTextAttribute||"name",CompositeView.prototype.initialize.call(this,a)},itemViewOptions:function(a,b){return{textAttribute:this.itemTextAttribute,itemIndex:b}},onRender:function(){if(!this.$el.hasClass("dropdown"))throw new Error("this.$el is not a dropdown container (div.dropdown)!\nCheck http://twitter.github.io/bootstrap/components.html#dropdowns for info.");this.ui.menu.attr("role","menu"),this.ui.menu.on("click","li > a",_.bind(this._onItemClick,this)),this._initCollection(),this._loadItems()},_initCollection:function(){this.collection=this.collection||new Collection,this.collection.model=this.collection.model||b.Model},_loadItems:function(){var a=this.$("li > a"),b=this.collection;if(!b.length&&a.length){var c=this.itemTextAttribute,d=_.map(a,function(a){var b=$(a),d={id:b.data("item-id")};return d[c]=_.str.trim(b.text()),d});b.reset(d,{silent:!0})}this.model=b.at(0)},_onItemClick:function(a){if(this.trigger("item:before:select",a)!==!1){a.preventDefault();var b=$(a.currentTarget),c=b.data("item-id"),d=this.collection.findWhere({id:c}),e=null;d&&(e=this.children.findByModel(d)),this.ui.toggle.ownText(b.text()),this.model=d,this.trigger("item:select",b,d,e,this)}},getSelected:function(){return this.model}})}(this),function(a,b){a.TOP_HEADER_NAVBAR_CLASS="main-header",a.ui.NavBar=ui.Widget.extend({onRender:function(){ui.Widget.prototype.onRender.call(this,options),this._configureScrolling()},_configureScrolling:function(){b(window).scroll(_.throttle(_.bind(function(a){var c=b(a.targetEl).scrollTop()>0?"add":"remove";this.$el[c+"Class"].call(this.$el,"navbar-scrolled")},this),500))}});var c=b("."+a.TOP_HEADER_NAVBAR_CLASS);c&&c.length&&(a.topHeaderNavBar=new ui.NavBar({el:c,autoRender:!0}))}(this,domLib()),function(a){a.ui.PluginAdapter={after:{render:function(){}},pluginOptions:function(){throw errors.mustOverride("getPluginOptions")},pluginMethods:function(){throw errors.mustOverride("getPluginMethods")},pluginName:function(){throw errors.mustOverride("getPluginName")}}}(this),function(a){a.ui.Window=ui.Widget.extend({onRender:function(){},initPlugin:function(){this.$el.modal({show:this.options.autoShow})}})}(this,domLib());
//# sourceMappingURL=http://raw.github.com/...